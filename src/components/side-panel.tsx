import Icons from "./icon";
import { useEffect, useState } from "react";
import { useNavigate } from "@tanstack/react-router";

export default function SidePanel()
{
    const [isOpen, setIsOpen] = useState(false);
    useEffect(() => 
    {
        const root = document.getElementById("root")
        if (root)
        {
            root.classList.toggle("expanded", isOpen)
            root.classList.toggle("collapsed", !isOpen)
        }
    }, [isOpen])

    const auth : {} = JSON.parse(localStorage.getItem("auth") || "{}")
    let isLoggedIn : boolean = false
    if (Object.keys(auth).length > 0)
    {
        isLoggedIn = true
    }
    const logoutRedir = useNavigate()
    const logoutFn = () => 
    {
        localStorage.removeItem("auth")
        logoutRedir({to : "/auth/login"})
    }

    return (
        <aside className={`side-panel ${isOpen ? "expanded" : "collapsed" }`}>
            <div>
                <p>
                    <Icons 
                        htmlElement={<svg className="sp-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.272 0.00398487C11.1717 0.00104066 11.0718 0.0182641 10.9782 0.0546347C10.8847 0.0910054 10.7994 0.145783 10.7274 0.215723C10.6554 0.285662 10.5982 0.36934 10.5591 0.461798C10.5201 0.554257 10.5 0.653615 10.5 0.753985V8.74998C10.5 9.16398 10.836 9.49998 11.25 9.49998H19.246C19.3464 9.50003 19.4457 9.47992 19.5382 9.44086C19.6306 9.4018 19.7143 9.34459 19.7843 9.27259C19.8542 9.2006 19.909 9.11531 19.9454 9.02176C19.9817 8.92821 19.9989 8.82831 19.996 8.72798C19.9267 6.43617 18.9854 4.25721 17.3641 2.63592C15.7428 1.01462 13.5638 0.0732526 11.272 0.00398487ZM12 7.99998V1.56598C13.6291 1.78564 15.141 2.53418 16.3034 3.69656C17.4658 4.85895 18.2143 6.37087 18.434 7.99998H12ZM9 2.78398C9 2.67985 8.97831 2.57685 8.93632 2.48155C8.89432 2.38625 8.83294 2.30075 8.75609 2.23047C8.67923 2.1602 8.58858 2.10671 8.48991 2.07339C8.39125 2.04008 8.28672 2.02768 8.183 2.03699C6.47967 2.19228 4.85585 2.82974 3.50176 3.87468C2.14768 4.91962 1.11938 6.32878 0.537329 7.93709C-0.0447226 9.54541 -0.156429 11.2863 0.215295 12.9558C0.587019 14.6253 1.42678 16.1543 2.63621 17.3638C3.84565 18.5732 5.37467 19.413 7.04419 19.7847C8.7137 20.1564 10.4546 20.0447 12.0629 19.4627C13.6712 18.8806 15.0804 17.8523 16.1253 16.4982C17.1702 15.1441 17.8077 13.5203 17.963 11.817C17.9723 11.7133 17.9599 11.6087 17.9266 11.5101C17.8933 11.4114 17.8398 11.3208 17.7695 11.2439C17.6992 11.167 17.6137 11.1057 17.5184 11.0637C17.4231 11.0217 17.3201 11 17.216 11H9V2.78398ZM1.5 11C1.49965 9.27101 2.09667 7.595 3.19004 6.25563C4.28341 4.91626 5.80595 3.99578 7.5 3.64999V11.75C7.5 12.164 7.836 12.5 8.25 12.5H16.35C15.9799 14.3227 14.9457 15.9429 13.4482 17.046C11.9507 18.1491 10.0968 18.6565 8.24626 18.4696C6.39574 18.2826 4.6807 17.4148 3.43406 16.0345C2.18742 14.6542 1.49813 12.8599 1.5 11Z" fill="white"/></svg>}
                     />
                    <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                        Dashboard
                    </span>
                </p>
                <p>
                    <Icons 
                        htmlElement={<svg className="sp-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21.75 10.5C21.9489 10.5 22.1397 10.421 22.2803 10.2803C22.421 10.1397 22.5 9.94891 22.5 9.75V6C22.5 5.60218 22.342 5.22064 22.0607 4.93934C21.7794 4.65804 21.3978 4.5 21 4.5H3C2.60217 4.5 2.22064 4.65804 1.93934 4.93934C1.65803 5.22064 1.5 5.60218 1.5 6V9.75C1.5 9.94891 1.57902 10.1397 1.71967 10.2803C1.86032 10.421 2.05109 10.5 2.25 10.5C2.64782 10.5 3.02935 10.658 3.31066 10.9393C3.59196 11.2206 3.75 11.6022 3.75 12C3.75 12.3978 3.59196 12.7794 3.31066 13.0607C3.02935 13.342 2.64782 13.5 2.25 13.5C2.05109 13.5 1.86032 13.579 1.71967 13.7197C1.57902 13.8603 1.5 14.0511 1.5 14.25V18C1.5 18.3978 1.65803 18.7794 1.93934 19.0607C2.22064 19.342 2.60217 19.5 3 19.5H21C21.3978 19.5 21.7794 19.342 22.0607 19.0607C22.342 18.7794 22.5 18.3978 22.5 18V14.25C22.5 14.0511 22.421 13.8603 22.2803 13.7197C22.1397 13.579 21.9489 13.5 21.75 13.5C21.3522 13.5 20.9706 13.342 20.6893 13.0607C20.408 12.7794 20.25 12.3978 20.25 12C20.25 11.6022 20.408 11.2206 20.6893 10.9393C20.9706 10.658 21.3522 10.5 21.75 10.5ZM21 14.9025V18H15.75V15.75H14.25V18H3V14.9025C3.642 14.7347 4.21025 14.3588 4.61582 13.8336C5.02139 13.3084 5.24139 12.6636 5.24139 12C5.24139 11.3364 5.02139 10.6916 4.61582 10.1664C4.21025 9.64121 3.642 9.2653 3 9.0975V6H14.25V8.25H15.75V6H21V9.0975C20.358 9.2653 19.7898 9.64121 19.3842 10.1664C18.9786 10.6916 18.7586 11.3364 18.7586 12C18.7586 12.6636 18.9786 13.3084 19.3842 13.8336C19.7898 14.3588 20.358 14.7347 21 14.9025Z" fill="white"/><path d="M14.25 9.75H15.75V14.25H14.25V9.75Z" fill="white"/></svg>}
                     />
                    <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                        Tickets
                    </span>
                </p>
                <p>
                    <Icons 
                        htmlElement={<svg className="sp-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 18V19.5H19.845C19.4258 19.973 18.9107 20.3514 18.3339 20.61C17.7572 20.8686 17.1321 21.0016 16.5 21C15.307 20.9986 14.1632 20.5241 13.3196 19.6804C12.4759 18.8368 12.0014 17.693 12 16.5H10.5C10.4976 17.72 10.8678 18.9117 11.5613 19.9155C12.2547 20.9193 13.2382 21.6873 14.3802 22.1168C15.5221 22.5462 16.768 22.6166 17.9511 22.3185C19.1341 22.0204 20.1979 21.3681 21 20.4487V22.5H22.5V18H18ZM16.5 10.5C15.6475 10.5044 14.8057 10.6895 14.03 11.0431C13.2544 11.3967 12.5625 11.9107 12 12.5513V10.5H10.5V15H15V13.5H13.155C13.5742 13.027 14.0893 12.6486 14.6661 12.39C15.2428 12.1314 15.8679 11.9984 16.5 12C17.693 12.0014 18.8368 12.4759 19.6804 13.3196C20.5241 14.1632 20.9986 15.307 21 16.5H22.5C22.498 14.9093 21.8652 13.3843 20.7404 12.2596C19.6157 11.1348 18.0907 10.502 16.5 10.5Z" fill="white"/><path d="M9 21H4.5V18H6V16.5H4.5V12.75H6V11.25H4.5V7.5H6V6H4.5V3H18V9H19.5V3C19.5 2.60218 19.342 2.22064 19.0607 1.93934C18.7794 1.65804 18.3978 1.5 18 1.5H4.5C4.10218 1.5 3.72065 1.65804 3.43934 1.93934C3.15804 2.22064 3 2.60218 3 3V6H1.5V7.5H3V11.25H1.5V12.75H3V16.5H1.5V18H3V21C3 21.3978 3.15804 21.7794 3.43934 22.0607C3.72065 22.342 4.10218 22.5 4.5 22.5H9V21Z" fill="white"/></svg>}
                     />
                    <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                        Dashboard
                    </span>
                </p>
                <p>
                    <Icons 
                        htmlElement={<svg className="sp-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 2.25V21.75H11.25V18.75H12.75V21.75H21V2.25H3ZM4.5 3.75H19.5V20.25H14.25V17.25H9.75V20.25H4.5V3.75ZM6 5.25V6.75H9V5.25H6ZM10.5 5.25V6.75H13.5V5.25H10.5ZM15 5.25V6.75H18V5.25H15ZM6 8.25V9.75H9V8.25H6ZM10.5 8.25V9.75H13.5V8.25H10.5ZM15 8.25V9.75H18V8.25H15ZM6 11.25V12.75H9V11.25H6ZM10.5 11.25V12.75H13.5V11.25H10.5ZM15 11.25V12.75H18V11.25H15ZM6 14.25V15.75H9V14.25H6ZM10.5 14.25V15.75H13.5V14.25H10.5ZM15 14.25V15.75H18V14.25H15ZM6 17.25V18.75H9V17.25H6ZM15 17.25V18.75H18V17.25H15Z" fill="white"/></svg>}
                     />
                    <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                        Dashboard
                    </span>
                </p>
                <p>
                    <Icons 
                        htmlElement={<svg className="sp-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 19.128C15.853 19.3754 16.7368 19.5006 17.625 19.5C19.0536 19.5034 20.4637 19.1776 21.746 18.548C21.7487 18.4907 21.75 18.433 21.75 18.375C21.7501 17.4929 21.4674 16.634 20.9434 15.9244C20.4194 15.2147 19.6818 14.6918 18.8387 14.4322C17.9956 14.1727 17.0916 14.1902 16.2592 14.4823C15.4269 14.7744 14.71 15.3256 14.214 16.055M15 19.128V19.125C15 18.012 14.715 16.965 14.214 16.055M15 19.128V19.234C13.0758 20.3939 10.8707 21.0047 8.624 21C6.293 21 4.112 20.355 2.25 19.234L2.249 19.125C2.24823 17.7095 2.71861 16.3339 3.58598 15.2153C4.45335 14.0966 5.66837 13.2984 7.03949 12.9466C8.4106 12.5948 9.85982 12.7093 11.1587 13.2721C12.4575 13.8349 13.5331 14.814 14.214 16.055M12 6.375C12 7.27011 11.6444 8.12855 11.0115 8.76149C10.3785 9.39442 9.52011 9.75 8.625 9.75C7.72989 9.75 6.87145 9.39442 6.23851 8.76149C5.60558 8.12855 5.25 7.27011 5.25 6.375C5.25 5.47989 5.60558 4.62145 6.23851 3.98851C6.87145 3.35558 7.72989 3 8.625 3C9.52011 3 10.3785 3.35558 11.0115 3.98851C11.6444 4.62145 12 5.47989 12 6.375ZM20.25 8.625C20.25 9.32119 19.9734 9.98887 19.4812 10.4812C18.9889 10.9734 18.3212 11.25 17.625 11.25C16.9288 11.25 16.2611 10.9734 15.7688 10.4812C15.2766 9.98887 15 9.32119 15 8.625C15 7.92881 15.2766 7.26113 15.7688 6.76884C16.2611 6.27656 16.9288 6 17.625 6C18.3212 6 18.9889 6.27656 19.4812 6.76884C19.9734 7.26113 20.25 7.92881 20.25 8.625Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>}
                     />
                    <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                        Users
                    </span>
                </p>
                <p>
                    <Icons 
                        htmlElement={<svg className="sp-svg" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.012 0.25C10.746 0.258 11.477 0.343 12.194 0.503C12.3465 0.53705 12.4846 0.617903 12.589 0.734261C12.6933 0.850618 12.7587 0.996668 12.776 1.152L12.946 2.679C12.97 2.89428 13.0442 3.10093 13.1626 3.28231C13.2811 3.46368 13.4404 3.61473 13.6279 3.72329C13.8153 3.83185 14.0256 3.89489 14.2419 3.90735C14.4582 3.9198 14.6743 3.88132 14.873 3.795L16.273 3.18C16.4152 3.11735 16.5734 3.10044 16.7257 3.13161C16.878 3.16278 17.0168 3.24049 17.123 3.354C18.1351 4.43516 18.889 5.73163 19.328 7.146C19.3739 7.29474 19.3723 7.45406 19.3236 7.60189C19.2749 7.74971 19.1813 7.87871 19.056 7.971L17.815 8.887C17.6402 9.01517 17.498 9.18273 17.3999 9.3761C17.3019 9.56947 17.2509 9.78321 17.2509 10C17.2509 10.2168 17.3019 10.4305 17.3999 10.6239C17.498 10.8173 17.6402 10.9848 17.815 11.113L19.058 12.028C19.1835 12.1204 19.2772 12.2495 19.3259 12.3976C19.3747 12.5456 19.3761 12.7051 19.33 12.854C18.8913 14.2683 18.1377 15.5647 17.126 16.646C17.02 16.7595 16.8814 16.8372 16.7293 16.8686C16.5773 16.8999 16.4192 16.8833 16.277 16.821L14.871 16.204C14.6726 16.117 14.4565 16.0779 14.2402 16.09C14.0239 16.102 13.8134 16.1648 13.6259 16.2733C13.4384 16.3817 13.279 16.5328 13.1607 16.7143C13.0424 16.8958 12.9685 17.1026 12.945 17.318L12.775 18.844C12.758 18.9975 12.6941 19.142 12.5919 19.2578C12.4897 19.3736 12.3542 19.4551 12.204 19.491C10.7556 19.8363 9.24637 19.8363 7.798 19.491C7.6476 19.4553 7.51192 19.3739 7.40953 19.2581C7.30714 19.1423 7.24304 18.9976 7.226 18.844L7.057 17.32C7.03245 17.1053 6.9579 16.8994 6.83933 16.7187C6.72077 16.5381 6.56149 16.3877 6.37429 16.2798C6.18709 16.1718 5.97719 16.1093 5.76144 16.0972C5.54569 16.0851 5.33011 16.1237 5.132 16.21L3.726 16.826C3.58365 16.8885 3.4254 16.9053 3.27312 16.8739C3.12084 16.8426 2.98207 16.7647 2.876 16.651C1.86412 15.5685 1.1109 14.2706 0.672998 12.855C0.626894 12.7061 0.628314 12.5466 0.677061 12.3986C0.725807 12.2505 0.819458 12.1214 0.944998 12.029L2.188 11.113C2.36285 10.9848 2.50504 10.8173 2.60305 10.6239C2.70106 10.4305 2.75214 10.2168 2.75214 10C2.75214 9.78321 2.70106 9.56947 2.60305 9.3761C2.50504 9.18273 2.36285 9.01517 2.188 8.887L0.944998 7.973C0.819458 7.88065 0.725807 7.75148 0.677061 7.60345C0.628314 7.45542 0.626894 7.29588 0.672998 7.147C1.11204 5.73263 1.86592 4.43616 2.878 3.355C2.98418 3.24149 3.12301 3.16378 3.27528 3.13261C3.42756 3.10144 3.58575 3.11835 3.728 3.181L5.128 3.796C5.32702 3.88227 5.5435 3.92066 5.76005 3.90809C5.97659 3.89551 6.18717 3.83232 6.37487 3.7236C6.56257 3.61487 6.72215 3.46363 6.84079 3.28204C6.95943 3.10045 7.03382 2.89356 7.058 2.678L7.228 1.152C7.24516 0.996355 7.3106 0.849984 7.41516 0.733414C7.51971 0.616845 7.65813 0.535924 7.811 0.502C8.527 0.343333 9.26066 0.259333 10.012 0.25ZM10.012 1.75C9.55836 1.75482 9.10574 1.79393 8.658 1.867L8.548 2.844C8.49797 3.2933 8.34309 3.72457 8.09584 4.10305C7.84859 4.48152 7.51589 4.79662 7.12454 5.02294C6.73319 5.24927 6.29414 5.38049 5.84279 5.40603C5.39143 5.43158 4.94038 5.35073 4.526 5.17L3.627 4.776C3.05554 5.46996 2.60061 6.25215 2.28 7.092L3.077 7.679C3.44146 7.94646 3.73783 8.29596 3.94215 8.69922C4.14647 9.10248 4.25298 9.54818 4.25308 10.0002C4.25318 10.4523 4.14685 10.8981 3.94271 11.3014C3.73857 11.7048 3.44234 12.0544 3.078 12.322L2.279 12.91C2.599 13.752 3.055 14.536 3.627 15.232L4.532 14.835C4.94549 14.6545 5.39559 14.5735 5.84607 14.5987C6.29655 14.6239 6.73483 14.7545 7.12561 14.98C7.5164 15.2055 7.84879 15.5196 8.09601 15.897C8.34324 16.2745 8.4984 16.7047 8.549 17.153L8.658 18.137C9.548 18.287 10.457 18.287 11.346 18.137L11.456 17.153C11.5056 16.704 11.6601 16.2729 11.907 15.8947C12.154 15.5164 12.4865 15.2015 12.8776 14.9755C13.2687 14.7495 13.7075 14.6186 14.1585 14.5935C14.6096 14.5684 15.0602 14.6498 15.474 14.831L16.378 15.227C16.95 14.5325 17.4053 13.7496 17.726 12.909L16.928 12.321C16.5635 12.0535 16.2672 11.704 16.0628 11.3008C15.8585 10.8975 15.752 10.4518 15.7519 9.99975C15.7518 9.54769 15.8581 9.10194 16.0623 8.6986C16.2664 8.29525 16.5627 7.94562 16.927 7.678L17.724 7.091C17.4032 6.25073 16.9479 5.46819 16.376 4.774L15.479 5.167C15.0647 5.34835 14.6137 5.42974 14.1622 5.40461C13.7106 5.37949 13.2714 5.24853 12.8798 5.02233C12.4882 4.79613 12.1554 4.48103 11.908 4.10245C11.6607 3.72388 11.5058 3.29245 11.456 2.843L11.347 1.867C10.9059 1.79493 10.459 1.75582 10.012 1.75ZM10 6.25C10.9946 6.25 11.9484 6.64509 12.6516 7.34835C13.3549 8.05161 13.75 9.00544 13.75 10C13.75 10.9946 13.3549 11.9484 12.6516 12.6517C11.9484 13.3549 10.9946 13.75 10 13.75C9.00544 13.75 8.05161 13.3549 7.34835 12.6517C6.64509 11.9484 6.25 10.9946 6.25 10C6.25 9.00544 6.64509 8.05161 7.34835 7.34835C8.05161 6.64509 9.00544 6.25 10 6.25ZM10 7.75C9.40326 7.75 8.83097 7.98705 8.40901 8.40901C7.98705 8.83097 7.75 9.40326 7.75 10C7.75 10.5967 7.98705 11.169 8.40901 11.591C8.83097 12.0129 9.40326 12.25 10 12.25C10.5967 12.25 11.169 12.0129 11.591 11.591C12.0129 11.169 12.25 10.5967 12.25 10C12.25 9.40326 12.0129 8.83097 11.591 8.40901C11.169 7.98705 10.5967 7.75 10 7.75Z" fill="white"/></svg>}
                     />
                    <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                        Settings
                    </span>
                </p>
                {
                    isLoggedIn
                    ?
                    <button onClick={logoutFn}>
                        <p>
                            <Icons 
                                htmlElement={<svg className="sp-svg" width="24" height="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path fill="#ffffff" d="M224 160C241.7 160 256 145.7 256 128C256 110.3 241.7 96 224 96L160 96C107 96 64 139 64 192L64 448C64 501 107 544 160 544L224 544C241.7 544 256 529.7 256 512C256 494.3 241.7 480 224 480L160 480C142.3 480 128 465.7 128 448L128 192C128 174.3 142.3 160 160 160L224 160zM566.6 342.6C579.1 330.1 579.1 309.8 566.6 297.3L438.6 169.3C426.1 156.8 405.8 156.8 393.3 169.3C380.8 181.8 380.8 202.1 393.3 214.6L466.7 288L256 288C238.3 288 224 302.3 224 320C224 337.7 238.3 352 256 352L466.7 352L393.3 425.4C380.8 437.9 380.8 458.2 393.3 470.7C405.8 483.2 426.1 483.2 438.6 470.7L566.6 342.7z"/></svg>}
                            />
                            <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                                Logout
                            </span>
                        </p>
                    </button>
                    : null
                }
            </div>
            <div>
                <button onClick={() => setIsOpen((prev) => !prev)} className="sp-toggle-btn">
                    <p>
                        <Icons htmlElement={<svg className="sp-svg" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.22 14.47L9.69 12L7.22 9.53003C7.12128 9.43835 7.0491 9.32175 7.01109 9.1925C6.97308 9.06325 6.97063 8.92615 7.004 8.79562C7.03737 8.6651 7.10533 8.54599 7.20072 8.45085C7.29611 8.35571 7.41539 8.28806 7.546 8.25503C7.67638 8.22172 7.81332 8.2241 7.94247 8.26193C8.07161 8.29976 8.1882 8.37164 8.28 8.47003L11.28 11.47C11.4205 11.6107 11.4993 11.8013 11.4993 12C11.4993 12.1988 11.4205 12.3894 11.28 12.53L8.28 15.53C8.13785 15.6627 7.94976 15.7349 7.75536 15.7316C7.56097 15.7282 7.37548 15.6495 7.238 15.512C7.10053 15.3745 7.02181 15.1891 7.01846 14.9947C7.0151 14.8003 7.08736 14.6122 7.22 14.47Z" fill="white"/><path d="M3.75 2H20.25C21.216 2 22 2.784 22 3.75V20.25C22 20.7141 21.8156 21.1592 21.4874 21.4874C21.1592 21.8156 20.7141 22 20.25 22H3.75C3.28587 22 2.84075 21.8156 2.51256 21.4874C2.18437 21.1592 2 20.7141 2 20.25V3.75C2 2.784 2.784 2 3.75 2ZM3.5 3.75V20.25C3.5 20.388 3.612 20.5 3.75 20.5H15V3.5H3.75C3.6837 3.5 3.62011 3.52634 3.57322 3.57322C3.52634 3.62011 3.5 3.6837 3.5 3.75ZM16.5 20.5H20.25C20.3163 20.5 20.3799 20.4737 20.4268 20.4268C20.4737 20.3799 20.5 20.3163 20.5 20.25V3.75C20.5 3.6837 20.4737 3.62011 20.4268 3.57322C20.3799 3.52634 20.3163 3.5 20.25 3.5H16.5V20.5Z" fill="white"/></svg>} />
                        <span className={`sp-label ${isOpen ? "expanded" : "collapsed"}`}>
                            Collapse
                        </span>
                    </p>
                </button>
                
            </div>
        </aside>
    );
}